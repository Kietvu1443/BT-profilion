:root{
  --panel-width:58vw;
  --panel-min-height:520px;
  --gold:#f5d36c;
  --bg-light:url('bg.jpg');
  --bg-dark:url('bg_dark.jpg');

  /* palette for ribbon & buttons */
  --panel-bg:#f5e6b3;
  --panel-border:#9b7b48;
  --panel-shadow:#5e472a;
  --dark-panel-bg:#2c333d;
  --dark-border:#495360;
  --dark-shadow:#1a1f25;
}

/* RESET / BASE */
*{box-sizing:border-box;margin:0;padding:0;image-rendering:pixelated}
html,body{height:100%}
body{
  font-family:'Quicksand',sans-serif;
  background:var(--bg-light) no-repeat center center/cover;
  position:relative;
  min-height:100vh;
  transition:background 450ms ease,filter 300ms ease;
}
body.dark-mode{
  background:var(--bg-dark) no-repeat center center/cover;
}

/* overlay */
body::after{
  content:"";
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.35);
  z-index:0;
}

/* MENU CHÍNH */
.menu{
  position:absolute;
  top:280px;
  left:60px;
  z-index:20;
  display:flex;
  flex-direction:column;
  gap:15px;
  padding:90px 40px 50px;
  width:420px;
  text-align:center;
  background:#b07d48 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAKElEQVQoU2NkIAIwEqmOHTv2L4wYMYJhwwYMYRiGhkYGBgaGhgYAjjABwMPDdfxH4AAAAASUVORK5CYII=") repeat;
  border:4px solid #3a2412;
  border-radius:3px; 
  box-shadow:0 0 0 3px #241409,4px 4px 0 #1d1007,6px 6px 0 #000;
  opacity:0;
  transform-origin:top center;
  transform:translateY(-200px);
  animation:dropIn 1.3s ease-out forwards;
}

/* Dark mode menu */
body.dark-mode .menu{
  background:#444c56 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAKElEQVQoU2NkYGD4z0ACDAwMDExMDDAYhmEGBgYGABZ2AQGvK53EAAAAAElFTkSuQmCC") repeat;
  border-color:#5f6b78;
  box-shadow:0 0 0 3px #2e353d,4px 4px 0 #000;
}

/* Logo tròn */
.menu-top-circle{
  position:absolute;
  top:-85px;
  left:50%;
  transform:translateX(-50%);
  width:160px;height:160px;
  border-radius:15px;
  border:3px solid #3a2412;
  background:#c69b63 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAKElEQVQoU2NkIAIwEqmOHTv2L4wYMYJhwwYMYRiGhkYGBgaGhgYAjjABwMPDdfxH4AAAAASUVORK5CYII=") repeat;
  box-shadow:2px 2px 0 #000,4px 4px 0 #1d1007;
  display:flex;align-items:center;justify-content:center;overflow:hidden;
}
body.dark-mode .menu-top-circle{
  background:#5b6775;
  border-color:#8794a3;
  box-shadow:2px 2px 0 #000,4px 4px 0 #202830;
}
.menu-top-circle img{width:100%;height:100%;object-fit:cover;image-rendering:pixelated}

/* menu items */
.menu-item{position:relative;z-index:21;}
.menu-item label,.menu-item a{
  display:block;
  font-size:1.15rem;
  color:#fff8cc;
  background:#7b4a2f;
  background-image:linear-gradient(to bottom,#8b5a3d,#61361f);
  border:3px solid #3a2412;
  border-radius:3px;
  padding:12px;
  cursor:pointer;
  text-shadow:1px 1px 0 #000;
  box-shadow:0 0 0 2px #241409,3px 3px 0 #000;
  transition:all .15s ease-in-out;
}
.menu-item label:hover,.menu-item a:hover{
  background-image:linear-gradient(to bottom,#a87149,#7b4a2f);
  transform:translate(-2px,-2px);
  box-shadow:2px 2px 0 #000,4px 4px 0 #1d1007
}

/* dark mode buttons */
body.dark-mode .menu-item label,
body.dark-mode .menu-item a{
  color:#dbe3ec;
  background:linear-gradient(to bottom,#4f5d6a,#2f3943);
  border:3px solid #2a3038;
  box-shadow:0 0 0 2px #1a1f25,3px 3px 0 #000;
  text-shadow:none;
}
body.dark-mode .menu-item label:hover,
body.dark-mode .menu-item a:hover{
  background:linear-gradient(to bottom,#647382,#3a444f);
  box-shadow:2px 2px 0 #000,4px 4px 0 #1b232c;
}

/* tooltip */
.tooltip{
  position:absolute;
  left:calc(100% + 15px);
  top:50%;
  transform:translateY(-50%);
  width:300px;
  padding:12px;
  background:#f8f1d6;
  border:3px solid #bba36e;
  border-radius:3px;
  box-shadow:3px 3px 0 #000,0 0 0 2px #6b5835;
  color:#4b3a1f;
  font-size:.95rem;
  opacity:0;
  pointer-events:none;
  transition:opacity .18s ease,transform .18s ease;
  z-index:100;
}
.menu-item:hover > .tooltip{opacity:1;transform:translateY(-50%) translateX(5px);}
.tooltip::before{
  content:"";position:absolute;left:-10px;top:50%;transform:translateY(-50%);
  border-top:8px solid transparent;border-bottom:8px solid transparent;border-right:10px solid #f8f1d6;
}
/* dark tooltip */
body.dark-mode .tooltip{
  background:#2e3540;
  border-color:#4f5b69;
  color:#e6edf5;
  box-shadow:3px 3px 0 #000,0 0 0 2px #222830;
}
body.dark-mode .tooltip::before{border-right-color:#2e3540;}

/* subpanels */
.subpanel{
  position:fixed;top:50%;right:50px;width:63vw;min-height:520px;
  padding:50px 40px;
  background:#f5f0dc;
  border:4px solid #9b7b48;border-radius:3px;
  box-shadow:-3px 3px 0 #000,0 0 0 3px #5e472a;
  color:#3c2d1b;font-size:1.05rem;
  z-index:18;
  opacity:0;transform:translateY(-150vh);
  pointer-events:none;visibility:hidden;transition:all .9s ease;
}
.subpanel.visible{opacity:1;pointer-events:auto;visibility:visible;animation:dropFromTopJS 1.1s cubic-bezier(.22,.9,.3,1.2) forwards;}
.subpanel.hide{animation:flyUpOutJS .9s cubic-bezier(.3,.7,.4,1) forwards;}
.subpanel h2{margin-bottom:20px;font-size:1.6rem;color:#2a1a0b;text-shadow:1px 1px 0 #fff;}
.subpanel p{margin-bottom:12px;line-height:1.5;}
/* dark subpanel */
body.dark-mode .subpanel{
  background:#2c333d;
  border-color:#495360;
  box-shadow:-3px 3px 0 #000,0 0 0 3px #1a1f25;
  color:#e2e8f0;
}
body.dark-mode .subpanel h2{color:#dce3ec;text-shadow:1px 1px 0 #000;}

/* back button */
.back-btn{
  display:inline-block;
  margin-top:30px;
  font-size:1.15rem;
  color:#fff8cc;
  background:#7b4a2f;
  background-image:linear-gradient(to bottom,#8b5a3d,#61361f);
  border:3px solid #3a2412;
  border-radius:3px;
  padding:10px 20px;
  cursor:pointer;
  text-shadow:1px 1px 0 #000;
  box-shadow:0 0 0 2px #241409,3px 3px 0 #000;
  transition:all .15s ease-in-out;
}
.back-btn:hover{
  background-image:linear-gradient(to bottom,#a87149,#7b4a2f);
  transform:translate(-2px,-2px);
  box-shadow:2px 2px 0 #000,4px 4px 0 #1d1007;
}
/* dark back button */
body.dark-mode .back-btn{
  color:#e6edf5;
  background:linear-gradient(to bottom,#4e5c6a,#2d353e);
  border:3px solid #1f252c;
  text-shadow:none;
  box-shadow:0 0 0 2px #1a1f25,3px 3px 0 #000;
}
body.dark-mode .back-btn:hover{
  background:linear-gradient(to bottom,#647382,#3a444f);
  transform:translate(-2px,-2px);
  box-shadow:2px 2px 0 #000,4px 4px 0 #1b232c;
}

/* dark-toggle */
.dark-toggle{
  position:fixed;top:24px;right:28px;width:64px;height:34px;
  background:#efeef0;border-radius:20px;
  box-shadow:inset 0 0 4px rgba(0,0,0,0.18);
  cursor:pointer;z-index:1100;transition:background .25s ease;
}
.dark-toggle.active{background:#333;}
.dark-toggle .knob{position:absolute;top:4px;left:4px;width:26px;height:26px;background:#fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,0.25);transition:transform .28s cubic-bezier(.2,.9,.25,1),background .25s;display:flex;align-items:center;justify-content:center;font-size:14px;}
.dark-toggle.active .knob{transform:translateX(30px);background:var(--gold);}
.knob .icon-sun{display:inline-block;transform:scale(.9);}
.knob .icon-moon{display:none;}
.dark-toggle.active .knob .icon-sun{display:none;}
.dark-toggle.active .knob .icon-moon{display:inline-block;}

/* sunflower */
.sunflower{
  position:fixed;bottom:20px;left:20px;width:70px;height:70px;object-fit:contain;z-index:2000;transition:transform 1s ease-in-out;image-rendering:pixelated;
}
.sunflower.rotate{transform:rotate(360deg)}

/* footer (fixed as bạn muốn) */
footer{
  position:fixed;bottom:0;left:0;width:100%;
  background:rgba(48,31,16,0.95);
  color:#f5d36c;text-align:center;
  padding:16px 12px;font-size:1rem;
  border-top:3px solid #a87b42;
  box-shadow:0 -3px 0 #000;z-index:999;
}
footer a{color:#ffe58a;text-decoration:none;margin:0 10px;transition:color .2s;}
footer a:hover{color:#ffffff;}
body.dark-mode footer{
  background:rgba(20,20,22,0.98);
  color:#ffe58a;
  border-top:3px solid #555;
  box-shadow:0 -3px 0 #000;
}
body.dark-mode footer a{color:#f9e7b0;}

/* Animations */
@keyframes dropIn{0%{opacity:0;transform:translateY(-200px)}60%{opacity:1;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}
@keyframes dropFromTopJS{0%{transform:translateY(-150vh);opacity:0}60%{transform:translateY(-52%);opacity:1}80%{transform:translateY(-48%)}100%{transform:translateY(-50%)}}
@keyframes flyUpOutJS{0%{transform:translateY(-50%);opacity:1}100%{transform:translateY(-150vh);opacity:0}}

/* ===========================
   HEADER — BĂNG RON PORTFOLIO
   =========================== */
.main-header{
  position:fixed;
  top:40px;
  left:78%;
  transform:translateX(-50%);
  text-align:center;
  z-index:900;
}

.main-header h1{
  position:relative;
  display:inline-block;
  background:linear-gradient(to bottom,#f5e6b3,#e4ca80);
  color:#3a2b13;
  border:4px solid #9b7b48;
  border-radius:3px;
  box-shadow:0 3px 0 #000,0 0 0 3px #5e472a;
  font-size:2.6rem;
  font-weight:700;
  letter-spacing:3px;
  padding:18px 80px;
  text-shadow:1px 1px 0 #fff;
  animation:dropHeader 1.2s ease-out forwards;
  transition:
    background 0.5s ease,
    border-color 0.5s ease,
    color 0.5s ease,
    box-shadow 0.5s ease,
    filter 0.5s ease;
}

/* Nếp gấp hai bên */
.main-header h1::before,
.main-header h1::after{
  content:"";
  position:absolute;
  top:50%;
  width:28px;
  height:40px;
  background:inherit;
  border:4px solid #9b7b48;
  transform:translateY(-50%) skewX(-25deg);
  box-shadow:0 3px 0 #000,0 0 0 3px #5e472a;
  z-index:-1;
}

.main-header h1::before{
  left:-24px;
  clip-path:polygon(0 0,100% 0,100% 100%,0 85%);
}
.main-header h1::after{
  right:-24px;
  clip-path:polygon(0 0,100% 15%,100% 100%,0 100%);
}

/* Dark mode header */
body.dark-mode .main-header h1{
  background:linear-gradient(to bottom,#3a444f,#2c333d);
  border-color:#495360;
  color:#e6edf5;
  box-shadow:0 3px 0 #000,0 0 0 3px #1a1f25;
  text-shadow:1px 1px 0 #000;
  filter:brightness(1.1);
}
body.dark-mode .main-header h1::before,
body.dark-mode .main-header h1::after{
  background:linear-gradient(to bottom,#3a444f,#2c333d);
  border-color:#495360;
  box-shadow:0 3px 0 #000,0 0 0 3px #1a1f25;
}

/* Animation khi xuất hiện */
@keyframes dropHeader {
  0% {opacity:0; transform:translate(-50%,-120px);}
  60% {opacity:1; transform:translate(-50%,10px);}
  100% {opacity:1; transform:translate(-50%,0);}
}

/* Nút tải tài liệu (nằm trên footer góc phải) */
.download-btn{
  position:fixed;
  right:40px;
  bottom:84px; /* nằm ngay trên footer */
  z-index:1000;
  background:#f5e6b3;
  border:4px solid #9b7b48;
  box-shadow:0 3px 0 #000,0 0 0 3px #5e472a;
  color:#3c2d1b;
  font-weight:600;
  padding:12px 20px;
  border-radius:4px;
  font-family:'Quicksand',sans-serif;
  text-decoration:none;
  letter-spacing:1px;
  transition:all 0.25s ease;
}

.download-btn:hover{
  transform:translateY(-3px);
  background:#f8efc8;
  box-shadow:0 5px 0 #000,0 0 0 3px #5e472a;
}
.download-btn:active{
  transform:translateY(2px);
  box-shadow:0 1px 0 #000,0 0 0 3px #5e472a;
}
body.dark-mode .download-btn{
  background:#2c333d;
  border-color:#495360;
  box-shadow:0 3px 0 #000,0 0 0 3px #1a1f25;
  color:#e6edf5;
}
body.dark-mode .download-btn:hover{
  background:#3a444f;
}

/* ==========================
   MOBILE FIX — 480px trở xuống
   ========================== */
@media screen and (max-width: 480px) {
  .sunflower {
  position: absolute;
  bottom: 10px;
  left: 10px;
  width: 40px;
  height: 40px;
  opacity: 1;
  filter: none;
  mix-blend-mode: normal;
  image-rendering: crisp-edges;
  z-index: 2;
}

  /* Toàn trang */
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-position: center top !important;
    overflow-x: hidden;
  }

  /* Header: căn giữa banner + avatar */
  .main-header {
    position: relative !important;
    top: 10px !important;
    left: 0 !important;
    transform: none !important;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 8px;
  }

  .main-header h1 {
    font-size: 1.3rem !important;
    padding: 8px 22px !important;
  }

  /* Avatar tròn (nếu nằm trong menu-top-circle) */
  .menu-top-circle {
    position: relative !important;
    top: -60px !important;
    width: 90px !important;
    height: 90px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    border-radius: 12px;
  }

  /* Menu chính */
  .menu {
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    transform: none !important;
    width: 90vw !important;
    max-width: 380px;
    margin: 12px auto;
    padding: 60px 20px 24px !important;
    border-radius: 10px;
    text-align: center;
    z-index: 10;
  }

  .menu-item {
    width: 100%;
    max-width: 320px;
  }

  /* Subpanel popup */
  .subpanel {
    position: fixed !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    width: 92vw !important;
    max-width: 400px;
    max-height: 85vh;
    overflow-y: auto;
    z-index: 9999 !important;
    border-radius: 12px;
  }

  .subpanel.hide { display: none !important; }
  .subpanel.visible { display: block !important; }

  /* Footer + Nút tải */
  footer {
    position: fixed !important;
    bottom: 0;
    left: 0;
    width: 100%;
    z-index: 5;
  }

  .download-btn {
    position: fixed !important;
    right: 12px !important;
    bottom: 76px !important;
    z-index: 20 !important;
  }

  .tooltip { display: none !important; }
}
